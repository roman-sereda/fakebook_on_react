/**
 * @flow
 * @jsx React.DOM
*/
var React = require('react');
var type = require('type-detect');

var Bool = React.createClass({displayName: "Bool",
  getDefaultProps:function() {
    return {
      uncheckedValue: false,
      checkedValue: true
    };
  },

  render:function()                {
    return (
      React.createElement("span", null, 
        React.createElement("input", {type: "hidden", readOnly: true, name: this.props.getName(), value: this.props.uncheckedValue}), 
        React.createElement("input", {type: "checkbox", id: this.props.getId(), checked: this._isChecked(), name: this.props.getName(), value: this.props.checkedValue, onChange: this._handleChange})
      )
    );
  },

  _isChecked:function()          {
    var v = this.props.getValue();

    if (type(v) === 'undefined' && type(this.props.defaultValue) !== 'undefined') {
      v = this.props.defaultValue;
    }

    return [true, 1, 'true', '1'].indexOf(v) !== -1;
  },

  _handleChange:function(e                            )       {
    if (this.props.onChange) {
      this.props.onChange(e);
      return;
    }

    var value = e.target.checked ? this.props.checkedValue : this.props.uncheckedValue;
    this.props.setValue(value);
  }
});

module.exports = Bool;
